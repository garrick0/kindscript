name: Trigger kindscript.ai Rebuild

on:
  push:
    branches: [main]
    paths:
      - 'docs/**'
      - 'src/types/index.ts'

jobs:
  trigger:
    runs-on: ubuntu-latest
    steps:
      - name: Trigger website deploy
        uses: actions/github-script@v7
        with:
          github-token: ${{ secrets.WEBSITE_DEPLOY_TOKEN }}
          script: |
            await github.rest.actions.createWorkflowDispatch({
              owner: 'samuelgleeson',
              repo: 'kindscript-website',
              workflow_id: 'deploy.yml',
              ref: 'main',
              inputs: {
                environment: 'production',
                trigger: 'docs-update'
              }
            });
