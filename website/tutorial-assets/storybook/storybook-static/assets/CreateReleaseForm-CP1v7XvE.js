import{r as i,j as s}from"./iframe-D5evrB1t.js";import{S}from"./search-DrQCx2FU.js";import{F as k}from"./file-text-BR3Iz2MY.js";function R({onSubmit:p,onCancel:h,loadAvailablePages:d,isLoading:c=!1}){const[a,l]=i.useState({name:"",description:"",version:"1.0.0",selectedPages:[]}),[f,u]=i.useState([]),[m,x]=i.useState(!0),[g,o]=i.useState(null),[n,y]=i.useState("");i.useEffect(()=>{v()},[]);const v=async()=>{try{if(x(!0),d){const e=await d();u(e)}else{const e=await j();u(e)}}catch{o("Failed to load available pages")}finally{x(!1)}},j=async()=>["login","signup","password-reset","dashboard","upload","processing-status","projects-list","code-preview","prd-preview","conflict-resolution","consolidation-review","wireframe-explorer","error","deployment-config","deployment-success"].map(r=>({id:r,title:r.split("-").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "),description:`${r} wireframe component`,priority:r.includes("login")||r.includes("dashboard")?"P0":"P1",section:w(r),latest_version:"v1",available_versions:["v1"]})),w=e=>e.includes("login")||e.includes("signup")||e.includes("password")?"AUTH":e.includes("dashboard")?"HOME":e.includes("upload")||e.includes("processing")?"DATA":e.includes("project")||e.includes("code")||e.includes("prd")?"PROJECTS":e.includes("error")||e.includes("deploy")?"SYSTEM":"OTHER",N=async e=>{e.preventDefault(),o(null);try{const r={name:a.name,description:a.description||void 0,version:a.version,pages:a.selectedPages};await p(r)}catch(r){o(r instanceof Error?r.message:"Unknown error")}},b=e=>{l(r=>({...r,selectedPages:r.selectedPages.includes(e)?r.selectedPages.filter(t=>t!==e):[...r.selectedPages,e]}))},P=f.filter(e=>e.title.toLowerCase().includes(n.toLowerCase())||e.id.toLowerCase().includes(n.toLowerCase())||e.section?.toLowerCase().includes(n.toLowerCase())).reduce((e,r)=>{const t=r.section||"OTHER";return e[t]||(e[t]=[]),e[t].push(r),e},{}),C=e=>{switch(e){case"P0":return"bg-red-100 text-red-800";case"P1":return"bg-yellow-100 text-yellow-800";case"P2":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return s.jsxs("form",{onSubmit:N,className:"space-y-8",children:[g&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:s.jsx("div",{className:"text-red-600",children:g})}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Release Information"}),s.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Release Name *"}),s.jsx("input",{type:"text",id:"name",required:!0,value:a.name,onChange:e=>l(r=>({...r,name:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., MVP Wireframes"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"version",className:"block text-sm font-medium text-gray-700",children:"Version *"}),s.jsx("input",{type:"text",id:"version",required:!0,pattern:"^\\d+\\.\\d+\\.\\d+$",value:a.version,onChange:e=>l(r=>({...r,version:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"1.0.0"}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Use semantic versioning (e.g., 1.0.0)"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),s.jsx("textarea",{id:"description",rows:3,value:a.description,onChange:e=>l(r=>({...r,description:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Describe the purpose of this release..."})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Select Pages"}),s.jsxs("div",{className:"text-sm text-gray-500",children:[a.selectedPages.length," selected"]})]}),s.jsxs("div",{className:"relative",children:[s.jsx(S,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search pages...",value:n,onChange:e=>y(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),m?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Loading available pages..."})]}):s.jsx("div",{className:"space-y-6",children:Object.entries(P).map(([e,r])=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsx("h3",{className:"text-md font-medium text-gray-900 mb-3",children:e}),s.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2 lg:grid-cols-3",children:r.map(t=>s.jsx("div",{className:`border rounded-lg p-3 cursor-pointer transition-colors ${a.selectedPages.includes(t.id)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>b(t.id),children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:a.selectedPages.includes(t.id),onChange:()=>b(t.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("h4",{className:"text-sm font-medium text-gray-900",children:t.title})]}),t.description&&s.jsx("p",{className:"mt-1 text-xs text-gray-500 line-clamp-2",children:t.description})]}),s.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${C(t.priority)}`,children:t.priority})]})},t.id))})]},e))}),a.selectedPages.length===0&&!m&&s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(k,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),s.jsx("p",{children:"No pages selected. Choose pages to include in your release."})]})]}),s.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:h,className:"px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:c||a.selectedPages.length===0||!a.name.trim(),className:"px-6 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Creating...":"Create Release"})]})]})}R.__docgenInfo={description:"",methods:[],displayName:"CreateReleaseForm",props:{onSubmit:{required:!0,tsType:{name:"signature",type:"function",raw:"(data: CreateReleaseRequest) => Promise<void>",signature:{arguments:[{type:{name:"CreateReleaseRequest"},name:"data"}],return:{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}}},description:""},onCancel:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},loadAvailablePages:{required:!1,tsType:{name:"signature",type:"function",raw:"() => Promise<AvailablePage[]>",signature:{arguments:[],return:{name:"Promise",elements:[{name:"Array",elements:[{name:"AvailablePage"}],raw:"AvailablePage[]"}],raw:"Promise<AvailablePage[]>"}}},description:""},isLoading:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};export{R as C};
