import{r as n,j as e}from"./iframe-D5evrB1t.js";import{M as B,E as T}from"./message-square-DKF1MyHe.js";import{S as k}from"./settings-DU1kDWgt.js";import{F as A}from"./file-text-BR3Iz2MY.js";import"./preload-helper-D9Z9MdNV.js";import"./createLucideIcon-CYL-vWIR.js";function v({release:s,studioBaseUrl:h="http://localhost:6008",onPageSelect:x,showSidebarByDefault:w=!0}){const[f,S]=n.useState(""),[g,j]=n.useState(!1),[y,P]=n.useState(w);n.useEffect(()=>{const a=`${h}/?path=/story/tools-release-explorer--default&release=${s.id}`;S(a)},[s.id,h]);const N=()=>{j(!0)},R=a=>{x&&x(a)},b=s.manifest.statistics||{totalPages:0,byPriority:{P0:0}};return e.jsxs("div",{className:"flex h-screen",children:[y&&e.jsxs("div",{className:"w-80 bg-white border-r border-gray-200 flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Release Overview"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:b.totalPages}),e.jsx("div",{className:"text-xs text-gray-500",children:"Total Pages"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:b.byPriority.P0||0}),e.jsx("div",{className:"text-xs text-gray-500",children:"Critical (P0)"})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{className:"flex-1 inline-flex items-center justify-center px-3 py-2 border border-gray-300 text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx(B,{className:"h-3 w-3 mr-1"}),"Comments"]}),e.jsxs("button",{className:"flex-1 inline-flex items-center justify-center px-3 py-2 border border-gray-300 text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx(k,{className:"h-3 w-3 mr-1"}),"Settings"]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Pages in Release"}),s.manifest.navigation?.sections?Object.entries(s.manifest.navigation.sections).map(([a,U])=>e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-2",children:a}),e.jsx("div",{className:"space-y-1",children:U.map(i=>{const o=Array.isArray(s.manifest.pages)?s.manifest.pages.find(D=>D.id===i):s.manifest.pages[i];return e.jsxs("div",{className:"flex items-center space-x-2 p-2 rounded-md hover:bg-gray-50 cursor-pointer",onClick:()=>R(i),children:[e.jsx(A,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-700 flex-1",children:o?.title||i}),o?.priority&&e.jsx("span",{className:`inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium ${o.priority==="P0"?"bg-red-100 text-red-800":o.priority==="P1"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:o.priority})]},i)})})]},a)):e.jsx("div",{className:"text-sm text-gray-500",children:"No pages configured for this release"})]}),e.jsx("div",{className:"p-6 border-t border-gray-200",children:e.jsxs("a",{href:f,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-700",children:[e.jsx(T,{className:"h-4 w-4 mr-1"}),"Open in New Tab"]})})]}),e.jsxs("div",{className:"flex-1 flex flex-col bg-gray-100",children:[e.jsxs("div",{className:"bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>P(!y),className:"p-1 rounded-md hover:bg-gray-100","aria-label":"Toggle sidebar",children:e.jsx("svg",{className:"h-5 w-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Studio Viewer - ",s.name]})]}),!g&&e.jsx("div",{className:"text-sm text-gray-500",children:"Loading Studio..."})]}),e.jsxs("div",{className:"flex-1 relative",children:[!g&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Loading Studio..."})]})}),e.jsx("iframe",{src:f,className:"w-full h-full border-0",onLoad:N,title:`Studio Viewer - ${s.name}`,sandbox:"allow-same-origin allow-scripts allow-forms allow-modals",style:{opacity:g?1:0,transition:"opacity 0.3s ease-in-out"}})]})]})]})}v.__docgenInfo={description:"",methods:[],displayName:"ReleaseViewer",props:{release:{required:!0,tsType:{name:"Release"},description:""},studioBaseUrl:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'http://localhost:6008'",computed:!1}},onPageSelect:{required:!1,tsType:{name:"signature",type:"function",raw:"(pageId: string) => void",signature:{arguments:[{type:{name:"string"},name:"pageId"}],return:{name:"void"}}},description:""},showSidebarByDefault:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}}}};const r=s=>()=>console.log("Action:",s),W={title:"Design System/Organisms/Release Management/ReleaseViewer",component:v,parameters:{layout:"fullscreen",docs:{description:{component:"A comprehensive viewer for releases that displays pages in an iframe with navigation sidebar."}}},tags:["autodocs"],argTypes:{release:{control:"object",description:"Release data to display"},studioBaseUrl:{control:"text",description:"Base URL for the studio iframe"},onPageSelect:{action:"pageSelected",description:"Called when a page is selected from the sidebar"},showSidebarByDefault:{control:"boolean",description:"Whether to show the sidebar by default"}}},t={id:"release-1",name:"MVP Wireframe Release",description:"Complete wireframe set for the MVP launch",version:"1.0.0",status:"approved",manifest:{id:"mvp-wireframe",name:"MVP Wireframe Release",version:"1.0.0",description:"Complete wireframe set for the MVP launch",pages:[{id:"login",title:"Login Page",description:"User authentication login form",priority:"P0",route:"/login",version:"v1",section:"AUTH"},{id:"signup",title:"Sign Up Page",description:"User registration form",priority:"P0",route:"/signup",version:"v1",section:"AUTH"},{id:"dashboard",title:"Dashboard",description:"Main application dashboard",priority:"P0",route:"/dashboard",version:"v2",section:"HOME"},{id:"upload",title:"File Upload",description:"Document upload interface",priority:"P1",route:"/upload",version:"v1",section:"DATA"},{id:"processing-status",title:"Processing Status",description:"Shows processing progress",priority:"P1",route:"/processing",version:"v1",section:"DATA"},{id:"projects-list",title:"Projects List",description:"Display all user projects",priority:"P1",route:"/projects",version:"v1",section:"PROJECTS"}],navigation:{sections:{AUTH:["login","signup"],HOME:["dashboard"],DATA:["upload","processing-status"],PROJECTS:["projects-list"]}},statistics:{totalPages:6,byPriority:{P0:3,P1:3,P2:0},bySection:{AUTH:2,HOME:1,DATA:2,PROJECTS:1}},features:["User authentication flow","Dashboard overview","File upload and processing","Project management"],knownLimitations:["Mobile responsive design not included","Advanced search functionality pending"],created:"2024-01-15T10:00:00Z",updated:"2024-01-20T14:30:00Z"},created_by:"user-123",created_at:"2024-01-15T10:00:00Z",updated_at:"2024-01-20T14:30:00Z"},M={...t,manifest:{...t.manifest,pages:[{id:"login",title:"Login Page",description:"Simple login form",priority:"P0",route:"/login",version:"v1"}],navigation:{sections:{AUTH:["login"]}},statistics:{totalPages:1,byPriority:{P0:1,P1:0,P2:0},bySection:{AUTH:1}}}},l={args:{release:t,studioBaseUrl:"http://localhost:6007",onPageSelect:r("page-selected"),showSidebarByDefault:!0}},c={args:{release:t,studioBaseUrl:"http://localhost:6007",onPageSelect:r("page-selected"),showSidebarByDefault:!1}},d={args:{release:M,studioBaseUrl:"http://localhost:6007",onPageSelect:r("page-selected"),showSidebarByDefault:!0}},m={args:{release:{...t,status:"draft",name:"Draft Release - Work in Progress"},studioBaseUrl:"http://localhost:6007",onPageSelect:r("page-selected"),showSidebarByDefault:!0}},p={args:{release:{...t,status:"review",name:"Release Under Review"},studioBaseUrl:"http://localhost:6007",onPageSelect:r("page-selected"),showSidebarByDefault:!0}},u={args:{release:t,studioBaseUrl:"https://studio.example.com",onPageSelect:r("page-selected"),showSidebarByDefault:!0}};l.parameters={...l.parameters,docs:{...l.parameters?.docs,source:{originalSource:`{
  args: {
    release: mockRelease,
    studioBaseUrl: 'http://localhost:6007',
    onPageSelect: action('page-selected'),
    showSidebarByDefault: true
  }
}`,...l.parameters?.docs?.source}}};c.parameters={...c.parameters,docs:{...c.parameters?.docs,source:{originalSource:`{
  args: {
    release: mockRelease,
    studioBaseUrl: 'http://localhost:6007',
    onPageSelect: action('page-selected'),
    showSidebarByDefault: false
  }
}`,...c.parameters?.docs?.source}}};d.parameters={...d.parameters,docs:{...d.parameters?.docs,source:{originalSource:`{
  args: {
    release: minimalRelease,
    studioBaseUrl: 'http://localhost:6007',
    onPageSelect: action('page-selected'),
    showSidebarByDefault: true
  }
}`,...d.parameters?.docs?.source}}};m.parameters={...m.parameters,docs:{...m.parameters?.docs,source:{originalSource:`{
  args: {
    release: {
      ...mockRelease,
      status: 'draft' as const,
      name: 'Draft Release - Work in Progress'
    },
    studioBaseUrl: 'http://localhost:6007',
    onPageSelect: action('page-selected'),
    showSidebarByDefault: true
  }
}`,...m.parameters?.docs?.source}}};p.parameters={...p.parameters,docs:{...p.parameters?.docs,source:{originalSource:`{
  args: {
    release: {
      ...mockRelease,
      status: 'review' as const,
      name: 'Release Under Review'
    },
    studioBaseUrl: 'http://localhost:6007',
    onPageSelect: action('page-selected'),
    showSidebarByDefault: true
  }
}`,...p.parameters?.docs?.source}}};u.parameters={...u.parameters,docs:{...u.parameters?.docs,source:{originalSource:`{
  args: {
    release: mockRelease,
    studioBaseUrl: 'https://studio.example.com',
    onPageSelect: action('page-selected'),
    showSidebarByDefault: true
  }
}`,...u.parameters?.docs?.source}}};const _=["Default","WithSidebarHidden","MinimalRelease","DraftRelease","ReviewRelease","CustomStudioUrl"];export{u as CustomStudioUrl,l as Default,m as DraftRelease,d as MinimalRelease,p as ReviewRelease,c as WithSidebarHidden,_ as __namedExportsOrder,W as default};
