import{r as i,j as e,s as u}from"./iframe-D5evrB1t.js";import{B as h}from"./Button-DTif8qqZ.js";import{I as x}from"./Input-CY5-kxsz.js";import"./preload-helper-D9Z9MdNV.js";import"./index-SGlD7ZDG.js";import"./cn-BQ1woUC9.js";import"./Icon-BVdV1tcm.js";import"./createLucideIcon-CYL-vWIR.js";import"./play-CTq2X17R.js";import"./user-MOkHRdz7.js";import"./users-CaUii9q0.js";import"./message-square-DKF1MyHe.js";import"./star-C9rq_WCT.js";import"./plus-BIwiTHae.js";import"./eye-BeouNTFJ.js";import"./database-Bh5bi1zG.js";import"./file-text-BR3Iz2MY.js";import"./triangle-alert-Bin-rNB-.js";import"./trash-2-CKY6oqXC.js";import"./x-CyT8dDxu.js";import"./search-DrQCx2FU.js";import"./house-C64cIi8I.js";import"./settings-DU1kDWgt.js";const f=({callbackUrl:n="/dashboard",error:w})=>{const[a,s]=i.useState(!1),[m,o]=i.useState(w),[p,y]=i.useState(""),[g,j]=i.useState(""),[v,S]=i.useState(!1);i.useEffect(()=>{const t=new URLSearchParams(window.location.search).get("error");t&&o(t),S(!0)},[]);const b=async()=>{s(!0);try{if(typeof window<"u"&&window.__STORYBOOK_PREVIEW__){console.log("[Storybook] Sign in simulated, would redirect to:",n),s(!1);return}const r=await u("auth0",{callbackUrl:n,redirect:!1});r?.error?(console.error("Sign in error:",r.error),o(r.error),s(!1)):r?.url?window.location.href=r.url:await u("auth0",{callbackUrl:n})}catch(r){console.error("Sign in error:",r),o("Failed to sign in. Please try again."),s(!1)}},N=async r=>{r.preventDefault(),s(!0),o("");try{if(typeof window<"u"&&window.__STORYBOOK_PREVIEW__){console.log("[Storybook] Test login simulated"),s(!1);return}const t=await u("test-credentials",{email:p,password:g,callbackUrl:n,redirect:!1});t?.error?(console.error("Test login error:",t.error),o("Invalid email or password"),s(!1)):t?.ok&&(window.location.href=n)}catch(t){console.error("Test login error:",t),o("Failed to sign in. Please try again."),s(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign in to Induction Studio"}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Access your workspace with Auth0"})]}),m&&e.jsx("div",{className:"rounded-md bg-red-50 p-4",children:e.jsx("div",{className:"text-sm text-red-800",children:m==="OAuthAccountNotLinked"?"This account is already linked to another user.":m==="AccessDenied"?"Access was denied. Please contact your administrator.":"An error occurred during sign in. Please try again."})}),e.jsxs("div",{className:"mt-8 space-y-6",children:[v&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-4",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Test Mode:"})," Use test credentials below or Auth0 login"]})}),e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsx(x,{type:"email",name:"email",placeholder:"test@example.com",value:p,onChange:r=>y(r.target.value),required:!0,disabled:a,"data-testid":"test-email-input"}),e.jsx(x,{type:"password",name:"password",placeholder:"test-password-123",value:g,onChange:r=>j(r.target.value),required:!0,disabled:a,"data-testid":"test-password-input"}),e.jsx(h,{type:"submit",variant:"default",size:"lg",className:"w-full",disabled:a,"data-testid":"test-login-button",children:a?"Signing in...":"Test Login"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-gray-50 text-gray-500",children:"Or continue with"})})]})]}),e.jsx(h,{variant:"default",size:"lg",className:"w-full",onClick:b,disabled:a,children:a?"Signing in...":"Sign in with Auth0"})]}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Having trouble?"," ",e.jsx("a",{href:"/support",className:"font-medium text-indigo-600 hover:text-indigo-500",children:"Contact support"})]})})]})})};f.__docgenInfo={description:"",methods:[],displayName:"SignInPage",props:{callbackUrl:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'/dashboard'",computed:!1}},error:{required:!1,tsType:{name:"string"},description:""}}};const J={title:"Pages/SignInPage",component:f,parameters:{layout:"fullscreen"},args:{callbackUrl:"/dashboard"}},l={args:{}},c={args:{error:"OAuthAccountNotLinked"}},d={args:{callbackUrl:"/releases"}};l.parameters={...l.parameters,docs:{...l.parameters?.docs,source:{originalSource:`{
  args: {}
}`,...l.parameters?.docs?.source}}};c.parameters={...c.parameters,docs:{...c.parameters?.docs,source:{originalSource:`{
  args: {
    error: 'OAuthAccountNotLinked'
  }
}`,...c.parameters?.docs?.source}}};d.parameters={...d.parameters,docs:{...d.parameters?.docs,source:{originalSource:`{
  args: {
    callbackUrl: '/releases'
  }
}`,...d.parameters?.docs?.source}}};const Q=["Default","WithError","WithCustomCallback"];export{l as Default,d as WithCustomCallback,c as WithError,Q as __namedExportsOrder,J as default};
