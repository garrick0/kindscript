import{r as l}from"./iframe-D5evrB1t.js";import{a as y}from"./ServiceProvider-cR3iPtCj.js";function v(h){const r=y(),[d,n]=l.useState([]),[p,i]=l.useState(!0),[w,c]=l.useState(null),o=l.useCallback(async()=>{try{i(!0),c(null);const t=await r.getAll();n(t)}catch(t){c(t),console.error("Failed to fetch releases:",t)}finally{i(!1)}},[r,h]);return l.useEffect(()=>{o()},[o]),{releases:d,loading:p,error:w,refetch:o,actions:{create:async t=>{try{const e=await r.create(t);return n(a=>[e,...a]),e}catch(e){throw c(e),e}},update:async(t,e)=>{try{const a=await r.update({id:t,...e});return n(s=>s.map(u=>u.id===t?a:u)),a}catch(a){throw c(a),a}},delete:async t=>{try{"deleteRelease"in r?await r.deleteRelease(t):await r.delete(t),n(e=>e.filter(a=>a.id!==t))}catch(e){throw c(e),e}},publish:async t=>{try{const e=await r.publish(t);return n(a=>a.map(s=>s.id===t?e:s)),e}catch(e){throw c(e),e}},archive:async t=>{try{const e=await r.archive(t);return n(a=>a.map(s=>s.id===t?e:s)),e}catch(e){throw c(e),e}},duplicate:async(t,e)=>{try{const a=await r.duplicate(t);return n(s=>[a,...s]),a}catch(a){throw c(a),a}}}}}export{v as u};
