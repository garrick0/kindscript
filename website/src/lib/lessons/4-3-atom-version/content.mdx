# The Version Pattern

The version folder is the repeating unit — every version has a source file and optionally stories. Let's extract this into a reusable Kind.

## What changed in `src/context.ts`?

We introduced `AtomVersion` — a composite Kind that owns both files:

```ts
type AtomVersion = Kind<"AtomVersion", {
  source: [AtomSource, './Button.tsx'];
  story:  [AtomStory,  './Button.stories.tsx'];
}, {
  noDependency: [["source", "story"]];
}>;
```

Three things to notice:

1. **Member paths are relative to the version folder** — `./Button.tsx` instead of `./v1.0.0/Button.tsx`. The instance root shifted.

2. **The instance root is now `./v1.0.0`** — the version folder itself:
   ```ts
   export const buttonV1 = {
     source: {},
     story: {},
   } satisfies Instance<AtomVersion, './v1.0.0'>;
   ```

3. **We added a constraint** — `noDependency: [["source", "story"]]` means the source file **cannot import from** the stories file. Stories can import from source (they need to render the component), but not the reverse.

## Run the check

```
npx ksc check .
```

**0 violations.** `Button.tsx` doesn't import from `Button.stories.tsx`, so the constraint is satisfied.

:::tip
The `noDependency` constraint enforces a one-way dependency: stories depend on source, never the other way around. This prevents test/story code from leaking into production components.
:::