import Link from 'next/link';

# Architecture as Types

**KindScript** enforces architectural rules at compile time. Define your architecture as TypeScript types â€” KindScript checks that your code follows them.

---

<div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(280px, 1fr))', gap: '2rem', margin: '3rem 0' }}>

<div style={{ padding: '1.5rem', border: '1px solid #e5e7eb', borderRadius: '8px', background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)', color: 'white' }}>
### âš¡ Compile-Time Checking
Architectural violations are caught before code ships â€” not in code review or at runtime. Violations appear as diagnostics in your IDE.
</div>

<div style={{ padding: '1.5rem', border: '1px solid #e5e7eb', borderRadius: '8px', background: 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)', color: 'white' }}>
### ðŸŽ¯ Zero Runtime
All APIs are pure TypeScript types. No runtime code, no bundle impact, no performance cost. `import type` is all you need.
</div>

<div style={{ padding: '1.5rem', border: '1px solid #e5e7eb', borderRadius: '8px', background: 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)', color: 'white' }}>
### ðŸ”§ TypeScript-Native
No new language, no config files. Your architecture is defined in `.ts` files using the type system you already know.
</div>

</div>

---

## Quick Example

Define Clean Architecture layers and constraints:

```typescript
import type { Kind, Instance, Constraints } from 'kindscript';

// Define architectural layers
type DomainLayer        = Kind<'DomainLayer'>;
type ApplicationLayer   = Kind<'ApplicationLayer'>;
type InfrastructureLayer = Kind<'InfrastructureLayer'>;

// Forbid domain from importing infrastructure
type Rules = Constraints<{
  noDependency: [DomainLayer, InfrastructureLayer];
  purity: DomainLayer; // No I/O in domain
}>;

// Declare the architecture
type CleanArch = Kind<'CleanArch', {
  domain:         [DomainLayer,         './domain'];
  application:    [ApplicationLayer,    './application'];
  infrastructure: [InfrastructureLayer, './infrastructure'];
}, Rules>;

// Instantiate it
export const arch = {} satisfies Instance<CleanArch, '.'>;
```

Run `npx ksc check .` and KindScript validates every import in your project against these rules.

---

## Get Started

<div style={{ display: 'flex', gap: '1rem', justifyContent: 'center', margin: '2rem 0', flexWrap: 'wrap' }}>

<Link href="/docs" style={{
  display: 'inline-block',
  padding: '1rem 2rem',
  background: '#3b82f6',
  color: 'white',
  borderRadius: '8px',
  textDecoration: 'none',
  fontWeight: 600,
  fontSize: '1.125rem',
  boxShadow: '0 4px 6px -1px rgb(0 0 0 / 0.1)',
}}>
ðŸ“š Read the Docs
</Link>

<Link href="/tutorial" style={{
  display: 'inline-block',
  padding: '1rem 2rem',
  background: '#10b981',
  color: 'white',
  borderRadius: '8px',
  textDecoration: 'none',
  fontWeight: 600,
  fontSize: '1.125rem',
  boxShadow: '0 4px 6px -1px rgb(0 0 0 / 0.1)',
}}>
ðŸš€ Start Interactive Tutorial
</Link>

</div>

---

## Features

### Three Core Constraints

- **`noDependency`** â€” Forbid imports between layers (e.g., domain can't import infrastructure)
- **`purity`** â€” Ensure layers don't import Node.js I/O modules (fs, http, etc.)
- **`noCycles`** â€” Detect circular dependency chains across layers

### Advanced Features

- **TypeKind** â€” Validate relationships between declarations within a file
- **Multi-Instance** â€” Model bounded contexts with multiple architecture instances
- **Scope Validation** â€” Ensure instances match declared file/directory scopes
- **Auto-generated Contracts** â€” Overlap and exhaustiveness checking

---

## Real-World Use Cases

- âœ… **Clean Architecture** â€” Enforce onion layer dependencies
- âœ… **Hexagonal Architecture** â€” Validate ports & adapters pattern
- âœ… **Design Systems** â€” Model component hierarchies (atoms, molecules, organisms)
- âœ… **Monorepo Boundaries** â€” Prevent cross-context imports
- âœ… **Plugin Systems** â€” Ensure plugins don't depend on each other

---

<div style={{ textAlign: 'center', margin: '3rem 0', padding: '2rem', background: '#f8fafc', borderRadius: '8px' }}>

### Ready to enforce your architecture?

The interactive tutorial walks through all three constraints with real code you can edit and run in your browser.

<Link href="/tutorial" style={{
  display: 'inline-block',
  marginTop: '1rem',
  padding: '0.75rem 1.5rem',
  background: '#1e293b',
  color: 'white',
  borderRadius: '6px',
  textDecoration: 'none',
  fontWeight: 600,
}}>
Start Learning â†’
</Link>

</div>
