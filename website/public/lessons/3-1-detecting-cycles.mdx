# Detecting Cycles

The `noCycles` constraint detects circular dependency chains between layers.

## The setup

Look at `src/context.ts`. The architecture has two layers with a `noCycles` constraint:

```ts
noCycles: ["domain", "infrastructure"]
```

This means these members must not form a circular dependency chain.

## The problem

Now look at the source files:
- `src/domain/service.ts` imports from `../infrastructure/database`
- `src/infrastructure/database.ts` imports from `../domain/service`

A classic mutual import — domain depends on infrastructure, and infrastructure depends right back on domain.

## See the error

```
npx ksc check .
```

You'll see a **KS70004** error — a cycle detected between domain and infrastructure.

:::info
Notice the error format uses `[domain]` instead of a file path. Cycles are **structural** violations (project-wide), so the diagnostic uses scope-based location rather than pointing to a single file.
:::